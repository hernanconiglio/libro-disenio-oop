<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.3">
<link rel="alternate" type="application/rss+xml" href="/libro-disenio-oop/blog/rss.xml" title="Diseño de software orientado a objetos Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/libro-disenio-oop/blog/atom.xml" title="Diseño de software orientado a objetos Blog Atom Feed"><title data-react-helmet="true">¿Cómo elaborar casos de prueba? | Diseño de software orientado a objetos</title><meta data-react-helmet="true" property="og:url" content="https://surprograma.github.io//libro-disenio-oop/docs/pruebas-automatizadas/elaborar-casos-prueba/"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="¿Cómo elaborar casos de prueba? | Diseño de software orientado a objetos"><meta data-react-helmet="true" name="description" content="Este artículo presenta algunas guías para desarrollar los casos de prueba, considerando que ya tienen una base de testeo unitario automatizado."><meta data-react-helmet="true" property="og:description" content="Este artículo presenta algunas guías para desarrollar los casos de prueba, considerando que ya tienen una base de testeo unitario automatizado."><link data-react-helmet="true" rel="shortcut icon" href="/libro-disenio-oop/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://surprograma.github.io//libro-disenio-oop/docs/pruebas-automatizadas/elaborar-casos-prueba/"><link data-react-helmet="true" rel="alternate" href="https://surprograma.github.io//libro-disenio-oop/docs/pruebas-automatizadas/elaborar-casos-prueba/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://surprograma.github.io//libro-disenio-oop/docs/pruebas-automatizadas/elaborar-casos-prueba/" hreflang="x-default"><link rel="stylesheet" href="/libro-disenio-oop/assets/css/styles.ed2cc2c2.css">
<link rel="preload" href="/libro-disenio-oop/assets/js/runtime~main.9a3832e3.js" as="script">
<link rel="preload" href="/libro-disenio-oop/assets/js/main.f3452fe5.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/libro-disenio-oop/"><img src="/libro-disenio-oop/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/libro-disenio-oop/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Diseño de software orientado a objetos</b></a><a class="navbar__item navbar__link navbar__link--active" href="/libro-disenio-oop/docs/intro/">Material</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/surprograma/libro-disenio-oop" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Ver en GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="navbar__search searchBarContainer_MM2z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_s5VG searchBarLoadingRing_2jQk"><div></div><div></div><div></div><div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/libro-disenio-oop/"><img src="/libro-disenio-oop/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/libro-disenio-oop/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Diseño de software orientado a objetos</b></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/libro-disenio-oop/docs/intro/">Material</a></li><li class="menu__list-item"><a href="https://github.com/surprograma/libro-disenio-oop" target="_blank" rel="noopener noreferrer" class="menu__link"><span>Ver en GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu menu--responsive thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA" aria-label="Sidebar navigation"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/libro-disenio-oop/docs/intro/">Introducción</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Pruebas automatizadas</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/libro-disenio-oop/docs/pruebas-automatizadas/elaborar-casos-prueba/">¿Cómo elaborar casos de prueba?</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Patrones de diseño</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/libro-disenio-oop/docs/patrones-disenio/introduccion/">Introducción</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/libro-disenio-oop/docs/patrones-disenio/catalogo/">Catálogo</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Kotlin</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/libro-disenio-oop/docs/kotlin/wollok-a-kotlin/">De Wollok a Kotlin</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/libro-disenio-oop/docs/kotlin/matchers-kotest/">Matchers de Kotest</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/libro-disenio-oop/docs/kotlin/localdatetime-un-minuto/">LocalDateTime en un minuto</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/libro-disenio-oop/docs/kotlin/otros-apuntes/">Otros apuntes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/libro-disenio-oop/docs/kotlin/repositorios-semilla/">Repositorios semilla</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="markdown"><header><h1 class="h1Heading_27L5">¿Cómo elaborar casos de prueba?</h1></header><p>Este artículo presenta algunas guías para desarrollar los casos de prueba, considerando que ya tienen una base de testeo unitario automatizado.</p><header><h1 class="h1Heading_27L5">Ejemplo</h1></header><p>Una ferretería tiene en cuenta ciertos aspectos para decidir si le puede fiar a un cliente o no.</p><ul><li>Al cliente particular le fia sólo si no adeuda nada, es decir debe $0.</li><li>A las constructoras les fia dependiendo de cuántos albañiles trabajen en la obra, si son 5 o más albañiles le fía hasta 10.000, de lo contrario sólo hasta 5.000.</li></ul><header><h1 class="h1Heading_27L5">Definiendo los escenarios</h1></header><p>En base al ejemplo anterior, podemos considerar los siguientes escenarios:</p><ul><li>Para un cliente particular: Si debe $1 ó $50.000 no nos importa, porque está en la misma clase de equivalencia (La deuda es mayor a 0).</li><li>Para una empresa constructora:<ul><li>Si tiene <strong>menos</strong> de 5 albañiles, son <code>&quot;pocos”</code> albañiles.</li><li>Si tiene <strong>al menos</strong> 5 albañiles, son <code>“muchos”</code> albañiles.</li></ul></li></ul><p><strong>Elegimos la cantidad de obreros en base al valor límite:</strong>
Pensar que si a partir de los 5 albañiles se considera mucho y 4 o menos son “pocos”, 5 o más es el valor de una obra con muchos albañiles y 4 o menos el de una obra con pocos albañiles</p><header><h1 class="h1Heading_27L5">Estructura de los tests</h1></header><p>La estructura que tienen los tests en base a los escenarios propuestos podría ser:</p><ul><li>Dado un cliente particular:<ul><li><strong>Que debe algo:</strong> No se le puede fiar.</li><li><strong>Que no debe nada:</strong> Se le puede fiar.</li></ul></li><li>Dado una constructora con muchos albañiles (5):<ul><li><strong>Si la obra debe más de $ 10.000:</strong> No se le puede fiar.</li><li><strong>Si la obra debe menos de $ 10.000:</strong> Se le puede fiar.</li></ul></li><li>Dado una constructora con pocos albañiles (4):<ul><li><strong>Si la obra debe más de $ 5.000:</strong> No se le puede fiar.</li><li><strong>Si la obra debe menos de $ 5.000:</strong> Se le puede fiar.</li></ul></li></ul><header><h1 class="h1Heading_27L5">Definiendo las clases y las variables de los tests</h1></header><p>Necesitamos:</p><ul><li>Un cliente particular.</li><li>Una empresa constructora con 6 albañiles.</li><li>Otra empresa constructora con 5 albañiles.</li></ul><p>A los que podemos configurar diferentes grados de deuda.</p><header><h1 class="h1Heading_27L5">Expresividad en los tests</h1></header><p>En la materia es muy común encontrarse con enunciados cómo el siguiente:</p><blockquote><p>La Constructora Hurlingham tiene 5 albañiles y una deuda de 7000 pesos.
Por lo que sería muy tentador hacer un test cómo el siguiente:</p></blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">class FerreteriaTest : DescribeSpec({</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  val ferreteria = Ferreteria()</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  describe(&quot;Puede fiar&quot;) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    val constructoraHurlingham = EmpresaConstructora(albaniles= 5, deuda = 7000)</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    it(&quot;ConstructoraHurlingham&quot;) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        ferreteria.puedeFiarA(constructoraHurlingham).shouldBeTrue()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">})</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="¿cuál-sería-el-problema-con-un-nombre-así"></a>¿Cuál sería el problema con un nombre así?<a class="hash-link" href="#¿cuál-sería-el-problema-con-un-nombre-así" title="Direct link to heading">#</a></h3><p>Un test así tendría que pasar, pero supongamos que hay un error en el código que establece cuando se le puede fiar a una empresa dependiendo de si es chica o no.</p><blockquote><ul><li>Si tiene <strong>al menos</strong> 5 albañiles, son <code>“muchos”</code> albañiles.</li></ul></blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">class EmpresaConstructora(var albaniles: Int, deuda: Int): Cliente(deuda) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    fun limiteDeEmpresa() = if(albaniles &gt; 5) 10000 else 5000 //Cambiamos la condición del if para que un caso que debería funcionar falle</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    override fun lePuedenFiar() = deuda &lt;= this.limiteDeEmpresa()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><img alt="Caso triste" src="/libro-disenio-oop/assets/images/test-poco-expresivo-7bf12236564a714ed0e3a296a786eee9.jpg"></p><p>Cómo se puede ver en la imagen un test que debería pasar no pasa, pero es dificil sondear el error, ya que puede que no sepamos o nos olvidemos de lo que es <code>Constructora Hurlingham</code> y tengamos que ver cómo está armado el test y que es lo que prueba, en cambio si hacemos algo por el estilo...</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">class FerreteriaTest : DescribeSpec({</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  val ferreteria = Ferreteria()</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  describe(&quot;Puede fiar&quot;) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    val constructoraHurlingham = EmpresaConstructora(albaniles= 5, deuda = 7000)</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    it(&quot;Constructora con muchos albañiles (al menos 5)&quot;) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        ferreteria.puedeFiarA(constructoraHurlingham).shouldBeTrue()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">})</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><img alt="Caso feliz" src="/libro-disenio-oop/assets/images/test-expresivo-3746e75ea5ee4512276d817e3e8a1f9a.jpg"></p><p>El error es mucho más evidente ya que podemos saber que está fallando una constructora con muchos albañiles(tiene al menos 5 albañiles).</p><header><h1 class="h1Heading_27L5">Recomendaciones adicionales</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="¿cómo-agrupar-los-escenarios"></a>¿Cómo agrupar los escenarios?<a class="hash-link" href="#¿cómo-agrupar-los-escenarios" title="Direct link to heading">#</a></h2><p>Una posibilidad es agrupar por diferentes <code>describe</code> por cada caso de prueba.
Tener en un sólo <code>describe</code> o <code>it</code> para muchos tests no es una buena práctica porque:</p><ul><li>Dificulta diferenciar los escenarios.</li><li>Las variables de los tests van a estar mezcladas.</li><li>La clase a testear pierde cohesión.</li><li>Un sólo test está cubriendo todos los casos de prueba y si construimos un fixture con cada uno de los tipos de cliente en el setup, estamos penalizando a cada uno de los tests por lo que necesitan los demás ¿tiene sentido crear una constructora con 5 albañiles si estoy testeando una que tiene 6?</li></ul><p>Por lo que en la materia les aconsejamos, para este ejemplo:
Un <code>describe</code> por cada tipo de cliente, y un <code>it</code> para cada caso a testear. Cabe destacar que para el caso de las constructoras, poner un <code>describe</code> para los 2 casos de constructoras.</p><header><h1 class="h1Heading_27L5">Pasando a un ejemplo práctico:</h1></header><p>En un nuevo archivo llamese <code>clientesTest.kt</code>, con un nombre que evidencia la clase que se va a testear más no lo que se está testeando <strong>Ej</strong>: <code>clienteConstructoraCon5Albaniles.kt</code>, ya que se pueden testear muchas cosas en un mismo archivo.</p><p>Al igual que los desribes e its, elegir nombres para las instancias de los objetos que especifiquen que es lo que testea es sumamente importante.</p><p>No es lo mismo: <code>val miConstructora = EmpresaConstructora(albaniles= 3, deuda = 0)</code> que <code> empresaConstructoraSinDeudas EmpresaConstructora(albaniles= 5, deuda = 7000)</code></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">class ClientesTest : DescribeSpec({</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  val ferreteria = Ferreteria()</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  describe(&quot;Puede fiar a clientes&quot;) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    describe(&quot;A un cliente particular&quot;) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      //Elegir nombres que represente la clase de equivalencia que estamos modelando.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      val clienteParticular = ClienteParticular(deuda=0)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      val clienteParticularDeudor = ClienteParticular(deuda=50)</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      it(&quot;Sin deudas&quot;) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          ferreteria.puedeFiarA(clienteParticular).shouldBeTrue()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      it(&quot;Que adeuda algo&quot;) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        ferreteria.puedeFiarA(clienteParticularDeudor).shouldBeFalse()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    describe(&quot;A una empresa constructora&quot;) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      val empresaConstructoraChica = EmpresaConstructora(albaniles=4, deuda=5000)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      val empresaConstructoraGrande = EmpresaConstructora(albaniles=5 deuda=10000)</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      describe(&quot;Con menos de 5 albañiles&quot;) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        it(&quot;Si adeuda hasta 5.000&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        ferreteria.puedeFiarA(empresaConstructoraChica).shouldBeTrue()</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        it(&quot;Si adeuda más de 5.000&quot;) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          empresaConstructoraChica.generarDeudaPor(1000)</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          //Notar que ahora la deuda de la &quot;empresaConstructoraChica&quot; va a ser de 6.000</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          empresaConstructoraChica.deuda.shouldBe(6000)</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          ferreteria.puedeFiarA(empresaConstructoraChica).shouldBeFalse()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      describe(&quot;Con 5 albañiles&quot;) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        it(&quot;Si adeuda hasta 10.000&quot;) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          ferreteria.puedeFiarA(empresaConstructoraGrande).shouldBeTrue()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        it(&quot;Si adeuda más de 10.000&quot;) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          empresaConstructoraGrande.generarDeudaPor(1000)</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          //Notar que ahora la deuda de la &quot;empresaConstructoraGrande&quot; va a ser de 6.000</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          empresaConstructoraGrande.deuda.shouldBe(11000)</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          ferreteria.puedeFiarA(empresaConstructoraGrande).shouldBeFalse()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="aaa-pattern"></a>AAA Pattern<a class="hash-link" href="#aaa-pattern" title="Direct link to heading">#</a></h2><p>Los tests suelen estructurarse según el patrón AAA: Arrange, Act y Assert.</p><ul><li><p><strong>Arrange</strong>: Que podría traducirse, cómo arreglar o gestionar, en dónde se instancian los objetos a testear(la Ferreteria y los Clientes). Cuando los contextos son compartidos, los frameworks basados en xUnit (JUnit5 es uno de ellos) nos permiten ubicarlo en un método setup (@BeforeEach). La desventaja de esta técnica es que para tener una idea general de los elementos que participan en el test debemos mirar el test y el setup, por eso una alternativa suele ser tener métodos en el test que construyen el escenario que se necesita:</p></li><li><p><strong>Act</strong>: Son las operaciones que tienen efecto. por ejemplo el método del cliente <code>generarDeudaPor(cantidad)</code>. Hay tests que quizás no necesiten disparar acciones, y está bien que eso ocurra.</p></li><li><p><strong>Assert</strong>: Lo que esperamos que pase, generalmente asociado a las respuestas que da el envío de un mensaje al objeto testeado.</p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="one-assert-per-test"></a>One assert per test<a class="hash-link" href="#one-assert-per-test" title="Direct link to heading">#</a></h2><p>Hay ciertas controversias respecto a si podemos tener varios asserts en el mismo test, ya que cuando el primer assert falla los siguientes no se siguen evaluando: esto en realidad depende del runner de xUnit, podríamos eventualmente trabajar con un framework que continue buscando asserts y discrimine cuáles anduvieron y cuáles no (RSpec, framework de testeo para Ruby, hace ésto).</p><p>Por lo que nuestro consejo es: Los tests deben fallar por exactamente un solo motivo, esto relaja esa restricción.
En resúmen lo importante no es tener un solo <code>assert</code>, sino que todos los <code>asserts</code> estén relacionados con la misma funcionalidad.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">describe(&quot;Nuestros empleados&quot;){</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  it(&quot;Obtener correctamente nuestros Empleados&quot;) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    val albaniles =  mutableListOf(&quot;Bruno&quot;, &quot;Ricardo&quot;, &quot;Damián&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    albaniles.size.shouldBe(3)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    albaniles.get(0).shouldBe(&quot;Bruno&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    albaniles.get(1).shouldBe(&quot;Ricardo&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    albaniles.get(2).shouldBe(&quot;Damián&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="resúmen"></a>Resúmen<a class="hash-link" href="#resúmen" title="Direct link to heading">#</a></h2><ul><li>Armá escenarios que definan las clases de tests.</li><li>Definí los <code>describe</code> e <code>it</code> según corresopnda para cada test, de manera de entender qué estamos testeando. El cómo lo terminás de ver en el código, evitá duplicidades entre el texto que explica y el código escrito.</li><li>Evitá que un <code>describe</code> tenga muchos escenarios juntos, es más difícil seguirlos.</li><li>Los nombres de las variables deben reflejar la clase de equivalencia que están resolviendo, y no casos particulares (sí empresaConstructoraChica, no empresita o miEmpresa).</li><li>Los tests se suelen estructurar utilizando las tres A: Arrange (el setup que conviene mantenerlo simple), Act (operaciones con efecto cuando corresponde) y Assert (las aserciones que pueden ser más de una por cada test, pero deben testear el mismo concepto).</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="créditos"></a>Créditos<a class="hash-link" href="#créditos" title="Direct link to heading">#</a></h2><p>Fuente Original <a href="http://wiki.uqbar.org/wiki/articles/testeo-unitario-avanzado.html" target="_blank" rel="noopener noreferrer">Testeo unitario avanzado</a>, elaborado por Fernando Dodino para <code>Uqbar Project</code>. Transformado a Markdown y adaptado a Kotlin por Pablo Gerez para UNaHur.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/surprograma/libro-disenio-oop/edit/main/docs/pruebas-automatizadas/elaborar-casos-prueba.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF">Last updated on <b><time datetime="2021-07-28T20:43:11.000Z">7/28/2021</time></b> by <b>Federico Aloi</b></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/libro-disenio-oop/docs/intro/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Introducción</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/libro-disenio-oop/docs/patrones-disenio/introduccion/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Introducción »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#¿cuál-sería-el-problema-con-un-nombre-así" class="table-of-contents__link">¿Cuál sería el problema con un nombre así?</a></li><li><a href="#¿cómo-agrupar-los-escenarios" class="table-of-contents__link">¿Cómo agrupar los escenarios?</a></li><li><a href="#aaa-pattern" class="table-of-contents__link">AAA Pattern</a></li><li><a href="#one-assert-per-test" class="table-of-contents__link">One assert per test</a></li><li><a href="#resúmen" class="table-of-contents__link">Resúmen</a></li><li><a href="#créditos" class="table-of-contents__link">Créditos</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/libro-disenio-oop/docs/intro/">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Comunidad</div><ul class="footer__items"><li class="footer__item"><a href="https://youtube.com/c/elsurtambienprograma" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discord.gg/qwAgfDx3tX" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://t.me/surprograma" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Telegram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://instagram.com/surprograma" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Instagram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><p>Todo el contenido de este sitio se publica bajo una licencia <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.es">CC BY-SA 4.0</a></p><p>Algunos derechos reservados. © 2021 El Sur También programa.</p></div></div></div></footer></div>
<script src="/libro-disenio-oop/assets/js/runtime~main.9a3832e3.js"></script>
<script src="/libro-disenio-oop/assets/js/main.f3452fe5.js"></script>
</body>
</html>